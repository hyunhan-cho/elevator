/* 앱 전체 레이아웃 */
/* 글로벌 박스사이징으로 모바일 스크롤 튐 방지 및 예상치 못한 폭 증가 방지 */
*, *::before, *::after { box-sizing: border-box; }

.app {
  /* 밝은 회색 배경 (레퍼런스 느낌) */
  background: linear-gradient(180deg, #eef2f5 0%, #e5ebf1 40%, #d9e1ea 100%);
  /* 모바일 브라우저 주소창 변동 대응: dvh를 우선 사용, 미지원 시 vh 사용 */
  min-height: 100dvh;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  /* iOS safe-area 고려 */
  padding: calc(16px + env(safe-area-inset-top, 0px)) 16px calc(24px + env(safe-area-inset-bottom, 0px));
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  color: #fff;
  /* 공통 폭 변수: 화면이 작을 때는 vw 기준으로 줄이고, 큰 화면에서는 고정 최대폭 유지 */
  --wrap-width: min(92vw, 410px);   /* 엘리베이터/컨트롤 기준 폭 */
  --panel-width: min(92vw, 360px);  /* 하단 카드 폭 (두 카드 동일) */
}

.elevator-wrapper {
  width: 100%;
  max-width: var(--wrap-width);
  margin: 0 auto 14px;
}

/* 엘리베이터 본체 */
.elevator {
  position: relative;
  width: 100%;
  aspect-ratio: 3 / 4;
  border: 5px solid #64748b;
  border-radius: 20px; /* 더 둥글게 */
  overflow: hidden;
  box-shadow: 0 16px 40px rgba(0,0,0,0.4);
  background: #0f172a;
}

/* 흔들림 애니메이션 */
@keyframes shake {
  10%, 90% { transform: translate3d(-1px, 0, 0); }
  20%, 80% { transform: translate3d(2px, 0, 0); }
  30%, 50%, 70% { transform: translate3d(-1px, 0, 0); }
  40%, 60% { transform: translate3d(1px, 0, 0); }
}
.elevator-moving {
  animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both infinite;
}

/* 층 표시기 - 제거됨, TopInfo가 대체 */

/* 창밖 풍경 */
.floor-scene {
  position: absolute;
  inset: 0;
  transition: all 0.5s ease-in-out;
  display: flex;
  align-items: center;
  justify-content: center;
}
.scene-label {
  position: absolute;
  left: 50%;
  top: 44%;
  transform: translate(-50%, -50%);
  color: #fff;
  font-weight: 900;
  /* 작은 화면에서 가독성 유지 */
  font-size: clamp(14px, 4.8vw, 20px);
  background: rgba(15,23,42,.7);
  padding: clamp(8px, 2.4vw, 10px) clamp(12px, 3.8vw, 16px);
  border-radius: 999px;
  box-shadow: 0 4px 12px rgba(0,0,0,.3);
  letter-spacing: 0.5px;
}

/* 엘리베이터 내부 프레임 */
.elevator-inside {
  position: absolute;
  inset: 0;
  z-index: 10;
  background-size: 100% 100%;
  background-repeat: no-repeat;
}

/* 엘리베이터 문 */
.door {
  position: absolute;
  top: 0; bottom: 0;
  width: 50%;
  z-index: 20;
  background-size: 200% 100%;
  background-repeat: no-repeat;
  transition: transform 1.5s ease-in-out;
}
.door-left { left: 0; background-position: left; }
.door-right { right: 0; background-position: right; }

/* 제어판 */
.control-panel {
  background: #d1d5db; /* gray-300 */
  padding: 16px;
  border-bottom-left-radius: 12px;
  border-bottom-right-radius: 12px;
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 12px;
}
.btn {
  padding: 14px;
  font-size: 22px;
  font-weight: 800;
  border-radius: 8px;
  background: #6b7280; /* gray-500 */
  color: white;
  border: none;
  cursor: pointer;
  transition: background 0.2s ease-in-out, opacity 0.2s;
}
.btn:hover { background: #f59e0b; /* amber-500 */ }
.btn:disabled { opacity: .5; cursor: not-allowed; }
.btn-active { background: #fbbf24; color: #111827; }

.hint { margin-top: 24px; text-align: center; }

/* 상단 정보 배지 - 세로 배치 */
.top-info { position: absolute; top: 14px; left: 14px; display: flex; flex-direction: column; gap: 8px; z-index: 35; }
.badge { background: #fff; color: #111827; border-radius: 8px; padding: clamp(6px, 2.2vw, 8px) clamp(10px, 3vw, 12px); box-shadow: 0 2px 6px rgba(0,0,0,.25); border: 3px solid #000; font-size: clamp(12px, 3.4vw, 14px); line-height: 1.25; }
.badge.date { font-weight: 800; }
.badge.floor { font-weight: 800; display: flex; flex-direction: column; gap: 4px; align-items: flex-start; }
.badge.floor > div:first-child { font-size: clamp(10px, 3vw, 12px); font-weight: 600; }
.badge.floor > div:last-child { font-size: clamp(18px, 5.6vw, 24px); font-weight: 900; }

/* 구름 */
.cloud { position: absolute; width: 80px; height: 40px; background: rgba(255,255,255,.9); border-radius: 40px; filter: drop-shadow(0 2px 2px rgba(0,0,0,.15)); opacity: .9; }
.cloud:before, .cloud:after { content: ''; position: absolute; background: inherit; border-radius: 50%; }
.cloud:before { width: 32px; height: 32px; left: 10px; top: -12px; }
.cloud:after { width: 42px; height: 42px; left: 34px; top: -18px; }
.c1 { left: 12%; top: 26%; animation: cloud-move 18s linear infinite; }
.c2 { left: 55%; top: 38%; animation: cloud-move 24s linear infinite reverse; }
.c3 { left: 32%; top: 58%; animation: cloud-move 20s linear infinite; }
@keyframes cloud-move { from { transform: translateX(-20px); } to { transform: translateX(20px); } }

/* 캐릭터 (원형 이모지 느낌) - 문보다 아래 레이어 */
/* 이미지 캐릭터: 투명 배경 PNG을 좌하단에 배치 */
.character-img { position: absolute; bottom: 10px; left: 14px; height: clamp(90px, 28vw, 140px); width: auto; z-index: 15; pointer-events: none; }

/* 미니 컨트롤 (위/아래 버튼) */
.mini-controls { display: flex; gap: 12px; justify-content: center; margin: 14px auto 20px; width: var(--wrap-width); }
.mini { width: clamp(40px, 12vw, 48px); height: clamp(36px, 10vw, 40px); font-weight: 900; font-size: clamp(16px, 4.5vw, 18px); border-radius: 9999px; border: none; background: #1e293b; color: #fff; cursor: pointer; box-shadow: 0 6px 14px rgba(0,0,0,.3); transition: all .2s; display: flex; align-items: center; justify-content: center; }
.mini:hover { background: #334155; transform: translateY(-2px); }
.mini:disabled { opacity: .4; cursor: not-allowed; transform: none; }

/* 공통 패널 */
.panel { background: #e5e7eb; color: #111827; margin: 0 auto 16px; padding: clamp(14px, 4vw, 18px); border-radius: 22px; width: var(--panel-width); max-width: 100%; box-shadow: 0 10px 24px rgba(0,0,0,.3); }
.panel-title { margin: 0 0 12px; font-size: 17px; font-weight: 800; }

/* 진행바 */
.progress { height: clamp(12px, 3.8vw, 16px); background: #d1d5db; border-radius: 999px; overflow: hidden; box-shadow: inset 0 2px 4px rgba(0,0,0,.2); }
.progress-fill { height: 100%; background: linear-gradient(90deg, #fde68a, #fbbf24); width: 0%; transition: width .4s ease; }
.progress-label { text-align: right; margin-top: 8px; font-weight: 700; color: #6b7280; font-size: clamp(13px, 3.6vw, 15px); }

/* 퀘스트 리스트 */
.quest-list { list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 10px; }
.quest { background: #fff; border-radius: 12px; padding: clamp(10px, 3.2vw, 12px) clamp(12px, 3.6vw, 14px); box-shadow: 0 2px 4px rgba(0,0,0,.08); transition: all .2s; width: 100%; box-sizing: border-box; }
.quest:hover { box-shadow: 0 4px 8px rgba(0,0,0,.12); }
.quest label { display: flex; align-items: center; gap: 12px; cursor: pointer; font-size: clamp(14px, 3.8vw, 15px); }
.quest input { width: clamp(18px, 5vw, 20px); height: clamp(18px, 5vw, 20px); cursor: pointer; }
.quest.done { background: #64748b; text-decoration: line-through; color: #f1f5f9; }

/* 작은 화면에서 디테일 추가 조정 */
@media (max-width: 480px) {
  .elevator { border-width: 4px; border-radius: 16px; }
  .top-info { top: 12px; left: 12px; gap: 6px; }
}

@media (max-width: 360px) {
  .elevator { border-width: 3px; border-radius: 14px; }
  .mini-controls { gap: 10px; }
}
